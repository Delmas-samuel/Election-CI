spring.application.name=election

# ============================================
# DataSource configuration
# Priorité:
# 1) SPRING_DATASOURCE_URL/USERNAME/PASSWORD (standard Spring Boot)
# 2) DB_URL, DB_USER, DB_PASSWORD (fréquents sur PaaS)
# 3) Construction depuis DB_HOST, DB_PORT, DB_NAME avec valeurs par défaut locales
#    -> jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?params
# 4) Valeurs locales de secours (localhost/election/root)
# ============================================
# URL composée avec une chaîne de repli afin de permettre la config via host/port/nom
spring.datasource.url=${SPRING_DATASOURCE_URL:${DB_URL:jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:election}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}}
# Identifiants avec alternatives
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USER:root}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASSWORD:}}

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ==========================
#     JPA / HIBERNATE
# ==========================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# ==========================
#     INIT SQL
# ==========================
spring.sql.init.mode=always
